{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\souha\\\\Desktop\\\\PFE Mast\\xE9re\\\\Getlearn1\\\\app_getlearn\\\\front\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\souha\\\\Desktop\\\\PFE Mast\\xE9re\\\\Getlearn1\\\\app_getlearn\\\\front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport { AUTH_ATTEMPTING, AUTH_SUCCESS, AUTH_FAILED } from './types';\nimport { apiLogin } from '../api/user';\nvar TOKEN_NAME = 'getlearn_token';\nexport var signIn = function signIn(request_data) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var _ref2, token, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: AUTH_ATTEMPTING\n                });\n                _context.prev = 1;\n                _context.next = 4;\n                return apiLogin(request_data);\n\n              case 4:\n                _ref2 = _context.sent;\n                token = _ref2.data.token;\n                dispatch(success(token));\n                _context.next = 13;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                data = _context.t0.response.data;\n                dispatch(error(data.error));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar success = function success(token) {\n  localStorage.setItem(TOKEN_NAME, token);\n  return {\n    type: AUTH_SUCCESS\n  };\n};\n\nvar error = function error(_error) {\n  return {\n    type: AUTH_FAILED,\n    payload: _error\n  };\n};","map":{"version":3,"sources":["C:/Users/souha/Desktop/PFE MastÃ©re/Getlearn1/app_getlearn/front/src/actions/auth_actions.js"],"names":["AUTH_ATTEMPTING","AUTH_SUCCESS","AUTH_FAILED","apiLogin","TOKEN_NAME","signIn","request_data","dispatch","type","token","data","success","response","error","localStorage","setItem","payload"],"mappings":";;AAAA,SAAQA,eAAR,EAAwBC,YAAxB,EAAqCC,WAArC,QAAuD,SAAvD;AACA,SAAQC,QAAR,QAAuB,aAAvB;AAEA,IAAMC,UAAU,GAAE,gBAAlB;AAEA,OAAO,IAAMC,MAAM,GAAE,SAARA,MAAQ,CAAAC,YAAY,EAAI;AACpC;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,iBAAMC,QAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACHA,gBAAAA,QAAQ,CAAC;AAACC,kBAAAA,IAAI,EAACR;AAAN,iBAAD,CAAR;AADG;AAAA;AAAA,uBAGyBG,QAAQ,CAACG,YAAD,CAHjC;;AAAA;AAAA;AAGSG,gBAAAA,KAHT,SAGEC,IAHF,CAGSD,KAHT;AAILF,gBAAAA,QAAQ,CAACI,OAAO,CAACF,KAAD,CAAR,CAAR;AAJK;AAAA;;AAAA;AAAA;AAAA;AAOeC,gBAAAA,IAPf,eAOKE,QAPL,CAOeF,IAPf;AAQDH,gBAAAA,QAAQ,CAACM,KAAK,CAACH,IAAI,CAACG,KAAN,CAAN,CAAR;;AARC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA,CAlBM;;AAoBP,IAAMF,OAAO,GAAG,SAAVA,OAAU,CAACF,KAAD,EAAW;AACvBK,EAAAA,YAAY,CAACC,OAAb,CAAqBX,UAArB,EAAgCK,KAAhC;AACA,SAAO;AAACD,IAAAA,IAAI,EAACP;AAAN,GAAP;AACH,CAHD;;AAIA,IAAMY,KAAK,GAAG,eAAAA,MAAK,EAAI;AACnB,SAAO;AAAEL,IAAAA,IAAI,EAACN,WAAP;AAAmBc,IAAAA,OAAO,EAACH;AAA3B,GAAP;AACH,CAFD","sourcesContent":["import {AUTH_ATTEMPTING,AUTH_SUCCESS,AUTH_FAILED} from './types';\r\nimport {apiLogin} from '../api/user';\r\n\r\nconst TOKEN_NAME ='getlearn_token';\r\n\r\nexport const signIn= request_data => {\r\n return async dispatch =>{\r\n     dispatch({type:AUTH_ATTEMPTING});\r\n  try{\r\n   const {data: {token}} = await apiLogin(request_data);\r\n   dispatch(success(token)) ;\r\n\r\n  }catch(e){\r\n      const {response:{data}}=e;\r\n       dispatch(error(data.error)) ;\r\n}\r\n\r\n\r\n\r\n };\r\n\r\n\r\n\r\n};\r\n\r\nconst success = (token) => {\r\n    localStorage.setItem(TOKEN_NAME,token);\r\n    return {type:AUTH_SUCCESS};\r\n};\r\nconst error = error => {\r\n    return { type:AUTH_FAILED,payload:error}\r\n};\r\n\r\n "]},"metadata":{},"sourceType":"module"}